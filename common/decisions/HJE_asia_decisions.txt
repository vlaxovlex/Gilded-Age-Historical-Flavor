dec_kor = { #Ask for Japanese help
	is_shown = {
		JKFP_is_active_trigger = no
	 	exists = c:KOR
		this = c:KOR
		OR = {
			AND = {
				exists = c:CHI
				is_subject_of = c:CHI
			}
			AND = {
				exists = c:TPG
				is_subject_of = c:TPG
			}
		}
		NOT = {
			has_variable = kor_var
		}
	}

	possible = {
		exists = c:JAP
		OR = {
			c:JAP = { has_variable = meiji_restoration_complete }
			c:JAP = { has_journal_entry = je_meiji_main }
		}
	}

	when_taken = {
		change_relations = {
			country = c:CHI
			value = -70
		} 
		set_secret_goal = {
			country = c:CHI
			secret_goal = antagonize
		}	
		c:KOR = { set_variable = kor_var }
		c:JAP = { trigger_event = { id = HJE_japan.1 } }
	}
	
	ai_chance = {
		base = 20
		modifier = {
			trigger = {
				year >= 1884
			}
			add = 80
		}		
	}
}

# (Great Game) Ask the other one to join in diplomatic play against you from aggressor
tgg_the_enemy_of_my_enemy = {

	is_shown = {
		NOT = { has_variable = already_asked_tgg_for_help }
		NOT = { any_country = { has_variable = tgg_victim } }
		exists = c:GBR
		c:GBR = { country_rank = rank_value:great_power }
		exists = c:RUS
		c:RUS = { country_rank = rank_value:great_power }
		country_rank < rank_value:major_power
		OR = {
			AND = {
				exists = c:PER
				c:PER = ROOT
			}
			is_afghan_nation = yes
		}
		NOT = { 
			AND = {
				c:GBR = { is_diplomatic_play_enemy_of = ROOT } 
				c:RUS = { is_diplomatic_play_enemy_of = ROOT } 
			}
		}
		NOT = {
			AND = {
				c:RUS = { is_diplomatic_play_enemy_of = ROOT }
				OR = {
					any_diplomatic_play = {
						OR = {
							target_is = ROOT
							any_scope_target_ally = { THIS = ROOT }
						}
						OR = {
							target_is = c:GBR
							any_scope_target_ally = { THIS = c:GBR }
						}
					}
					any_diplomatic_play = {
						OR = {
							initiator_is = ROOT
							any_scope_initiator_ally = { THIS = ROOT }
						}
						OR = {
							initiator_is = c:GBR
							any_scope_initiator_ally = { THIS = c:GBR }
						}
					}
				}
			}
		}
		NOT = {
			AND = {
				c:GBR = { is_diplomatic_play_enemy_of = ROOT }
				OR = {
					any_diplomatic_play = {
						OR = {
							target_is = ROOT
							any_scope_target_ally = { THIS = ROOT }
						}
						OR = {
							target_is = c:RUS
							any_scope_target_ally = { THIS = c:RUS }
						}
					}
					any_diplomatic_play = {
						OR = {
							initiator_is = ROOT
							any_scope_initiator_ally = { THIS = ROOT }
						}
						OR = {
							initiator_is = c:RUS
							any_scope_initiator_ally = { THIS = c:RUS }
						}
					}
				}
			}
		}
	}

	possible = {
		OR = {
			c:GBR = {
				NOT = { is_diplomatic_play_enemy_of = ROOT }
				relations:root >= 50
			}
			c:RUS = {
				NOT = { is_diplomatic_play_enemy_of = ROOT }
				relations:root >= 50
			}
		}
		custom_tooltip = {
			text = under_aggression_from_either_russia_or_britain_tt
			any_country = {
				is_diplomatic_play_enemy_of = ROOT
				OR = {
					AND = {
						exists = c:GBR
						OR = {
							c:GBR = THIS
							any_overlord_or_above = { c:GBR = THIS }
						}
					}
					AND = {
						exists = c:RUS
						OR = {
							c:RUS = THIS
							any_overlord_or_above = { c:RUS = THIS }
						}
					}
				}
			}
		}
		OR = {
			is_diplomatic_play_target = yes
			AND = {
				is_diplomatic_play_initiator = yes
				custom_tooltip = {
					text = this_nation_is_losing_tt
					any_scope_war = {
						attacker_warleader = ROOT
						has_war_support = { target = ROOT value < 0 }
					}
				}
			}
		}
	}

	when_taken = {
		set_variable = tgg_victim
		set_variable = { 
			name = already_asked_tgg_for_help 
			days = 365
		}
		random_country = {
			limit = {
				NOT = { is_diplomatic_play_enemy_of = ROOT }
				NOT = {
					any_subject_or_below = {
						is_diplomatic_play_enemy_of = ROOT
					}
				}
				OR = {
					AND = {
						exists = c:GBR
						c:GBR = THIS
					}
					AND = {
						exists = c:RUS
						c:RUS = THIS
					}
				}
			}
			trigger_event = { id = HJE_britain.12 }
		}
	}
	ai_chance = {
		base = 100
	}
}

