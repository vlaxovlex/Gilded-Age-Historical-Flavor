
HJE_cleanup_effect = {
	if = {
		limit = {			#Reactionaries random chance to become Estatists
			GovPlus_is_active_trigger = no
			reactionary_revolution_ongoing = no
			has_law = law_type:law_monarchy	
			OR = {
				has_law = law_type:law_wealth_voting
				has_law = law_type:law_census_voting
				has_law = law_type:law_universal_suffrage
			}
			any_interest_group = {
				has_ideology = ideology:ideology_paternalistic
				NOT = { has_ideology = ideology:ideology_pro_slavery }
				leader = {
					NOR = {
						has_ideology = ideology:ideology_slaver
						has_ideology = ideology:ideology_fascist
						has_ideology = ideology:ideology_integralist
						has_ideology = ideology:ideology_theocrat
						has_ideology = ideology:ideology_ethno_nationalist
						has_ideology = ideology:ideology_traditionalist
					}
				}
			}
		}
		random_list = {
			95 = {  }
			5 = { 
				random_interest_group = {
					limit = {
						has_ideology = ideology:ideology_paternalistic
						NOT = { has_ideology = ideology:ideology_pro_slavery }
						leader = {
							NOR = {
								has_ideology = ideology:ideology_slaver
								has_ideology = ideology:ideology_fascist
								has_ideology = ideology:ideology_integralist
								has_ideology = ideology:ideology_theocrat
								has_ideology = ideology:ideology_ethno_nationalist
								has_ideology = ideology:ideology_traditionalist
							}
						}
					}
					remove_ideology = ideology_paternalistic
					add_ideology = ideology_hje_estatist
				}
			}
		}
	}
	if = {
		limit = {			#Reactionaries random chance to become Conservative
			GovPlus_is_active_trigger = no
			reactionary_revolution_ongoing = no
			OR = {
				has_law = law_type:law_census_voting
				has_law = law_type:law_universal_suffrage
			}
			any_interest_group = {
				has_ideology = ideology:ideology_stratocratic
				NOT = { has_ideology = ideology:ideology_pro_slavery }
				leader = {
					NOR = {
						has_ideology = ideology:ideology_slaver
						has_ideology = ideology:ideology_fascist
						has_ideology = ideology:ideology_integralist
						has_ideology = ideology:ideology_theocrat
						has_ideology = ideology:ideology_ethno_nationalist
						has_ideology = ideology:ideology_traditionalist
					}
				}
			}
		}
		random_list = {
			95 = {  }
			5 = { 
				random_interest_group = {
					limit = {
						has_ideology = ideology:ideology_stratocratic
						NOT = { has_ideology = ideology:ideology_pro_slavery }
						leader = {
							NOR = {
								has_ideology = ideology:ideology_slaver
								has_ideology = ideology:ideology_fascist
								has_ideology = ideology:ideology_integralist
								has_ideology = ideology:ideology_theocrat
								has_ideology = ideology:ideology_ethno_nationalist
								has_ideology = ideology:ideology_traditionalist
							}
						}
					}
					remove_ideology = ideology_stratocratic
					add_ideology = ideology_hje_conservative
				}
			}
		}
	}
	if = {
		limit = {			#USA AI will not be allowed to colonize canadian states
			exists = c:USA
			c:USA = THIS
			is_player = no
			OR = {
				has_state_in_state_region = STATE_ALBERTA
				has_state_in_state_region = STATE_SASKATCHEWAN
			}
			any_country = {
				OR = {
					country_has_primary_culture = cu:anglo_canadian
					country_has_primary_culture = cu:franco_canadian
				}
				OR = {
					has_state_in_state_region = STATE_ALBERTA
					has_state_in_state_region = STATE_SASKATCHEWAN
				}
			}
		}
		random_country = {
			limit = {
				OR = {
					country_has_primary_culture = cu:anglo_canadian
					country_has_primary_culture = cu:franco_canadian
				}
				OR = {
					has_state_in_state_region = STATE_ALBERTA
					has_state_in_state_region = STATE_SASKATCHEWAN
				}
			}
			save_scope_as = canada_scope
		}
		every_state = {
			limit = {
				owner = ROOT
				OR = {
					state_region = s:STATE_ALBERTA
					state_region = s:STATE_SASKATCHEWAN
				}
			}
			set_state_owner = scope:canada_scope
		}
	}
	if = {
		limit = {			#USA AI will try to take these states at least once
			year > 1840
			exists = c:USA
			c:USA = ROOT
			is_player = no
			NOT = { has_variable = am_wargoals }
			c:MEX = { 
				is_diplomatic_play_enemy_of = ROOT 
				OR = {
					has_state_in_state_region = STATE_TEXAS
					has_state_in_state_region = STATE_CALIFORNIA
				}
			}
		}
		c:USA = { set_variable = am_wargoals }
		random_diplomatic_play = {
			limit = {
				any_scope_play_involved = {
					THIS = c:MEX
					is_diplomatic_play_enemy_of = ROOT
				}
			}
			if = {
				limit = { NOT = { c:MEX = { any_scope_state = { is_target_of_wargoal = c:USA } } } }
				if = {
					limit = { c:MEX = { has_state_in_state_region = STATE_TEXAS } }
					add_war_goal = {
						holder = c:USA
						type = return_state
						target_state = s:STATE_TEXAS.region_state:MEX
						primary_demand = yes
					}
				}
				if = {
					limit = { c:MEX = { has_state_in_state_region = STATE_CALIFORNIA } }
					add_war_goal = {
						holder = c:USA
						type = return_state
						target_state = s:STATE_CALIFORNIA.region_state:MEX
						primary_demand = yes
					}
				}
			}
		}
	}
	if = {
		limit = {			#Romania Fix
			exists = c:ROM
			root = c:ROM
			OR = {
				AND = {
					exists = c:MOL
					is_subject_of = c:MOL
				}
				AND = {
					exists = c:WAL
					is_subject_of = c:WAL
				}
			}
		}
		if = {
			limit = {
				exists = c:MOL
				is_subject_of = c:MOL
			}
			create_diplomatic_pact = {
				country = c:MOL
				type = personal_union
			}
			c:MOL = {	
				remove_diplomatic_pact = {
					country = root
					type = puppet
				}
				remove_diplomatic_pact = {
					country = root
					type = protectorate
				}
				remove_diplomatic_pact = {
					country = root
					type = personal_union
				}
			}
		}
		if = {
			limit = {
				exists = c:WAL
				is_subject_of = c:WAL
			}
			create_diplomatic_pact = {
				country = c:WAL
				type = personal_union
			}
			c:WAL = {	
				remove_diplomatic_pact = {
					country = root
					type = puppet
				}
				remove_diplomatic_pact = {
					country = root
					type = protectorate
				}
				remove_diplomatic_pact = {
					country = root
					type = personal_union
				}
			}
		}
	}
	if = {
		limit = {			#Russian government fix 1
			NOT = { has_variable = ai_1861_var }
			year >= 1861
			exists = c:RUS
			c:RUS = ROOT
			c:RUS = { is_player = no }		
		}
		set_ruling_interest_groups = { ig_intelligentsia ig_industrialists }
		activate_law = law_type:law_tenant_farmers
		activate_law = law_type:law_slavery_banned
		activate_law = law_type:law_agrarianism
		set_variable = 1861_var
	}
	
	if = {
		limit = {			#Russian government fix 2
			NOT = { has_variable = ai_1862_var }
			year >= 1862
			exists = c:RUS
			c:RUS = ROOT
			c:RUS = { is_player = no }		
		}
		set_ruling_interest_groups = { ig_intelligentsia ig_industrialists }
		activate_law = law_type:law_professional_army
		activate_law = law_type:law_national_guard
		set_variable = 1862_var
	}	
	
	if = {
		limit = {			#Chinese historical market fix
			NOT = { has_variable = ai_china_closes_markets_again_var }				
			exists = c:CHI
			c:CHI = ROOT
			c:CHI = { is_player = no }
			year >= 1855	
			NOT = { has_global_variable = had_second_opium_war }
			has_variable = var_dynamic_opium_wars_victim
			OR = {
				NOT = { has_law = law_type:law_isolationism }
				trigger_if = {
					any_country = {
						country_rank = rank_value:great_power
						OR = {
							has_diplomatic_pact = { who = ROOT type = foreign_investment_rights }	
							has_diplomatic_pact = { who = ROOT type = foreign_investment_agreement }	
						}
					}
				}
			}
		}
		set_variable = ai_china_closes_markets_again_var
		activate_law = law_type:law_isolationism
		every_country = {
			limit = { has_diplomatic_pact = { who = ROOT type = foreign_investment_rights } }
			remove_diplomatic_pact = {
				country = ROOT
				type = foreign_investment_rights
			}
		}
		every_country = {
			limit = { has_diplomatic_pact = { who = ROOT type = foreign_investment_agreement } }
			remove_diplomatic_pact = {
				country = ROOT
				type = foreign_investment_agreement
			}
		}
	}
	
	if = {
		limit = {			#Brazilian slavery fix
			exists = c:BRZ
			c:BRZ = ROOT
			year >= 1889		
			c:BRZ = { is_player = no }	
			NOT = { has_variable = ai_brazil_bans_slavery_var }
		}
		activate_law = law_type:law_slavery_banned	
		set_variable = ai_brazil_bans_slavery_var		
	}

	if = {
		limit = {			#British colonization buff
			exists = c:GBR
			c:GBR = ROOT
			c:GBR = { is_player = no }		
			year >= 1850
			NOT = { has_variable = ai_tech_buff_for_suez_expedition_var }
		}
		add_technology_researched = nationalism
		add_technology_researched = colonization
		set_variable = ai_tech_buff_for_suez_expedition_var
	}
	
	if = {
		limit = {			#Brazilian education fix
			exists = c:BRZ
			c:BRZ = ROOT
			c:BRZ = { is_player = no }	
			NOT = { has_variable = ai_brazil_education_reforms_var }
			year >= 1851 # vague date lol
			has_law = law_type:law_monarchy	
		}
		activate_law = law_type:law_public_schools
		set_variable = ai_brazil_education_reforms_var
	}

	if = {
		limit = {			#Anyone who tries to colonize New Zealand states once it exists instantly gives colonial states to New Zealand
			exists = c:GBR
			any_country = {
				NOT = { THIS = ROOT }
				is_subject_of = c:GBR
				has_variable = new_zealand_variable
			}
			OR = {
				c:GBR = ROOT
				is_subject_of = c:GBR
				AND = {
					exists = c:DEI 	#idk why but DEI does it too
					c:DEI = ROOT
					is_player = no 
				}
			}
			any_scope_state = {
				OR = {
					state_region = s:STATE_NORTH_ISLAND
					state_region = s:STATE_SOUTH_ISLAND
				}
			}
		}
		random_country = {
			limit = { has_variable = new_zealand_variable }
			save_scope_as = new_zealand_scope
		}
		every_state = {
			limit = {
				OR = {
					owner = c:GBR
					owner = { is_subject_of = c:GBR }
				}
				OR = {
					state_region = s:STATE_NORTH_ISLAND
					state_region = s:STATE_SOUTH_ISLAND
				}
			}
			set_state_owner = scope:new_zealand_scope
		}
	}

	if = { ## FIX TO TRY AND PREVENT AI BRITAIN FROM BEING SO DAMNED AUTHORITARIAN
		limit = {
			is_player = no
			has_law = law_type:law_monarchy
			has_strategy = ai_strategy_conservative_agenda
			exists = c:GBR
			c:GBR = THIS
			NOR = {
				has_law = law_type:law_public_health_insurance
				has_law = law_type:law_multicultural
				has_law = law_type:law_old_age_pension
				has_law = law_type:law_protected_speech
				has_law = law_type:law_graduated_taxation
				has_law = law_type:law_womens_suffrage
				has_law = law_type:law_cooperative_ownership
				has_law = law_type:law_guaranteed_liberties
				has_law = law_type:law_worker_protections
				has_law = law_type:law_universal_suffrage
			}
		}
		set_strategy = ai_strategy_progressive_agenda
	}

	if = {
		limit = { 
			exists = c:GER 
			NOT = { has_global_variable = capital_of_germany_mod_applied } 
			c:GER = {
				country_is_in_europe = yes
				any_scope_state = { 
					is_capital = yes 
					OR = {
						cu:north_german = { has_homeland = PREV }
						cu:south_german = { has_homeland = PREV }
					}
				}
			}
		}
		set_global_variable = capital_of_germany_mod_applied
		c:GER = {
			random_scope_state = {
				limit = {
					is_capital = yes 
					OR = {
						cu:north_german = { has_homeland = PREV }
						cu:south_german = { has_homeland = PREV }
					}
				}
				add_modifier = { 
					name = modifier_state_capital_of_germany
					months = -1
				}
			}
		}
	}
}
create_random_orleanist_ruler = {
	random_list = {
		3 = { create_character = { first_name = Philippe last_name = d_Orleans ruler = yes ideology = ideology_royalist on_created = { set_variable = is_orleanist } } }
		3 = { create_character = { first_name = Ferdinand-Philippe last_name = d_Orleans ruler = yes ideology = ideology_royalist on_created = { set_variable = is_orleanist } } }
		3 = { create_character = { first_name = Jean last_name = d_Orleans ruler = yes ideology = ideology_royalist on_created = { set_variable = is_orleanist } } }
		3 = { create_character = { first_name = Francois last_name = d_Orleans ruler = yes ideology = ideology_royalist on_created = { set_variable = is_orleanist } } }
		1 = { create_character = { first_name = Henri last_name = d_Orleans ruler = yes ideology = ideology_royalist on_created = { set_variable = is_orleanist } } }
		1 = { create_character = { first_name = Louis last_name = d_Orleans ruler = yes ideology = ideology_royalist on_created = { set_variable = is_orleanist } } }
		1 = { create_character = { first_name = Charles last_name = d_Orleans ruler = yes ideology = ideology_royalist on_created = { set_variable = is_orleanist } } }
	}
}
create_random_legitimist_ruler = {
	random_list = {
		5 = { create_character = { first_name = Louis last_name = de_Bourbon ruler = yes ideology = ideology_royalist on_created = { set_variable = is_legitimist } } }
		4 = { create_character = { first_name = Charles last_name = de_Bourbon ruler = yes ideology = ideology_royalist on_created = { set_variable = is_legitimist } } }
		3 = { create_character = { first_name = Henri last_name = de_Bourbon ruler = yes ideology = ideology_royalist on_created = { set_variable = is_legitimist } } }
		1 = { create_character = { first_name = Francois last_name = de_Bourbon ruler = yes ideology = ideology_royalist on_created = { set_variable = is_legitimist } } }
	}
}
create_random_bonapartist_ruler = {
	random_list = {
		3 = { create_character = { first_name = Napoleon-Louis last_name = Bonaparte ruler = yes ideology = ideology_royalist on_created = { set_variable = is_bonapartist } } }
		3 = { create_character = { first_name = Napoleon-Joseph last_name = Bonaparte ruler = yes ideology = ideology_royalist on_created = { set_variable = is_bonapartist } } }
		3 = { create_character = { first_name = Napoleon-Jerome last_name = Bonaparte ruler = yes ideology = ideology_royalist on_created = { set_variable = is_bonapartist } } }
		3 = { create_character = { first_name = Napoleon-Eugene last_name = Bonaparte ruler = yes ideology = ideology_royalist on_created = { set_variable = is_bonapartist } } }
		3 = { create_character = { first_name = Napoleon-Victor last_name = Bonaparte ruler = yes ideology = ideology_royalist on_created = { set_variable = is_bonapartist } } }
		3 = { create_character = { first_name = Napoleon-Charles last_name = Bonaparte ruler = yes ideology = ideology_royalist on_created = { set_variable = is_bonapartist } } }
		1 = { create_character = { first_name = Jean-Christophe last_name = Bonaparte ruler = yes ideology = ideology_royalist on_created = { set_variable = is_bonapartist } } }
	}
}
create_random_orleanist_heir = {
	random_list = {
		3 = { create_character = { first_name = Philippe last_name = d_Orleans age = 0 heir = yes ideology = ideology_royalist on_created = { set_variable = is_orleanist } } }
		3 = { create_character = { first_name = Ferdinand-Philippe last_name = d_Orleans age = 0 heir = yes ideology = ideology_royalist on_created = { set_variable = is_orleanist } } }
		3 = { create_character = { first_name = Jean last_name = d_Orleans age = 0 heir = yes ideology = ideology_royalist on_created = { set_variable = is_orleanist } } }
		3 = { create_character = { first_name = Francois last_name = d_Orleans age = 0 heir = yes ideology = ideology_royalist on_created = { set_variable = is_orleanist } } }
		1 = { create_character = { first_name = Henri last_name = d_Orleans age = 0 heir = yes ideology = ideology_royalist on_created = { set_variable = is_orleanist } } }
		1 = { create_character = { first_name = Louis last_name = d_Orleans age = 0 heir = yes ideology = ideology_royalist on_created = { set_variable = is_orleanist } } }
		1 = { create_character = { first_name = Charles last_name = d_Orleans age = 0 heir = yes ideology = ideology_royalist on_created = { set_variable = is_orleanist } } }
	}
}
create_random_legitimist_heir = {
	random_list = {
		5 = { create_character = { first_name = Louis last_name = de_Bourbon age = 0 heir = yes ideology = ideology_royalist on_created = { set_variable = is_legitimist } } }
		4 = { create_character = { first_name = Charles last_name = de_Bourbon age = 0 heir = yes ideology = ideology_royalist on_created = { set_variable = is_legitimist } } }
		3 = { create_character = { first_name = Henri last_name = de_Bourbon age = 0 heir = yes ideology = ideology_royalist on_created = { set_variable = is_legitimist } } }
		1 = { create_character = { first_name = Francois last_name = de_Bourbon age = 0 heir = yes ideology = ideology_royalistideology_royalist on_created = { set_variable = is_legitimist } } }
	}
}
create_random_bonapartist_heir = {
	random_list = {
		3 = { create_character = { first_name = Napoleon-Louis last_name = Bonaparte age = 0 heir = yes ideology = ideology_royalist on_created = { set_variable = is_bonapartist } } }
		3 = { create_character = { first_name = Napoleon-Joseph last_name = Bonaparte age = 0 heir = yes ideology = ideology_royalist on_created = { set_variable = is_bonapartist } } }
		3 = { create_character = { first_name = Napoleon-Jerome last_name = Bonaparte age = 0 heir = yes ideology = ideology_royalist on_created = { set_variable = is_bonapartist } } }
		3 = { create_character = { first_name = Napoleon-Eugene last_name = Bonaparte age = 0 heir = yes ideology = ideology_royalist on_created = { set_variable = is_bonapartist } } }
		3 = { create_character = { first_name = Napoleon-Victor last_name = Bonaparte age = 0 heir = yes ideology = ideology_royalist on_created = { set_variable = is_bonapartist } } }
		3 = { create_character = { first_name = Napoleon-Charles last_name = Bonaparte age = 0 heir = yes ideology = ideology_royalist on_created = { set_variable = is_bonapartist } } }
		1 = { create_character = { first_name = Jean-Christophe last_name = Bonaparte age = 0 heir = yes ideology = ideology_royalist on_created = { set_variable = is_bonapartist } } }
	}
}

HJE_apply_historical_dynasty_heirs_GBR_effect = {
	if = {
		limit = {
			year < 1842
			NOT = { has_global_variable = edward_7_of_england_born }
			owner = { 
				has_law = law_type:law_monarchy 
				ruler = { has_variable = is_hannover }
			}
			OR = {
				AND = { 
					exists = c:ENG
					owner = c:ENG
	            }
	            AND = { 
					NOT = { exists = c:ENG }
					exists = c:GBR
					owner = c:GBR
					c:GBR = { owns_entire_state_region = STATE_HOME_COUNTIES }
	            }
	        }
		}
		set_global_variable = edward_7_of_england_born
		owner = {
			create_character = {
				first_name = Edward
				last_name = Hannover
				historical = yes
				heir = yes		
				age = 0
				interest_group = ig_armed_forces
				female = no
				dna = dna_edward_7
				ideology = ideology:ideology_royalist
				traits = {
					imperious
					charismatic
					romantic
				}
				on_created = {
					set_variable = is_edward_7
					set_variable = is_hannover
					set_variable = weight_does_not_change
				}
			}
		}
	}
	if = {
		limit = {
			year >= 1842
			NOT = { has_global_variable = edward_7_of_england_born }
			owner = { 
				has_law = law_type:law_monarchy 
				ruler = { has_variable = is_hannover }
			}
			OR = {
				AND = { 
					exists = c:ENG
					owner = c:ENG
	            }
	            AND = { 
					NOT = { exists = c:ENG }
					exists = c:GBR
					owner = c:GBR
					c:GBR = { owns_entire_state_region = STATE_HOME_COUNTIES }
	            }
	        }
		}
		set_global_variable = edward_7_of_england_born
		owner = {
			create_character = {
				first_name = Edward
				last_name = Hannover
				historical = yes
				heir = yes		
				birth_date = 1841.11.9
				interest_group = ig_armed_forces
				female = no
				dna = dna_edward_7
				ideology = ideology:ideology_royalist
				traits = {
					imperious
					charismatic
					romantic
				}
				on_created = {
					set_variable = is_edward_7
					set_variable = is_hannover
					set_variable = weight_does_not_change
				}
			}
		}
	}
	if = {
		limit = {
			year >= 1866
			has_global_variable = edward_7_of_england_born
			NOT = { has_global_variable = george_5_of_england_born }
			owner = { 
				has_law = law_type:law_monarchy 
				ruler = { has_variable = is_hannover }
			}
			OR = {
				AND = { 
					exists = c:ENG
					owner = c:ENG
	            }
	            AND = { 
					NOT = { exists = c:ENG }
					exists = c:GBR
					owner = c:GBR
					c:GBR = { owns_entire_state_region = STATE_HOME_COUNTIES }
	            }
	        }
		}
		set_global_variable = george_5_of_england_born
		owner = {
			create_character = {
				first_name = George
				last_name = Hannover
				historical = yes
				heir = yes		
				birth_date = 1865.6.3
				interest_group = ig_armed_forces
				female = no
				dna = dna_george_5
				ideology = ideology:ideology_royalist
				traits = {
					meticulous
					direct
					cautious
				}
				on_created = {
					set_variable = is_george_5
					set_variable = is_hannover
				}
			}
		}
	}
	if = {
		limit = {
			year >= 1895
			has_global_variable = edward_7_of_england_born
			has_global_variable = george_5_of_england_born
			NOT = { has_global_variable = edward_8_of_england_born }
			owner = { 
				has_law = law_type:law_monarchy 
				ruler = { has_variable = is_hannover }
			}
			OR = {
				AND = { 
					exists = c:ENG
					owner = c:ENG
	            }
	            AND = { 
					NOT = { exists = c:ENG }
					exists = c:GBR
					owner = c:GBR
					c:GBR = { owns_entire_state_region = STATE_HOME_COUNTIES }
	            }
	        }
		}
		set_global_variable = edward_8_of_england_born
		owner = {
			create_character = {
				first_name = Edward
				last_name = Windsor
				historical = yes
				heir = yes		
				birth_date = 1894.6.23
				interest_group = ig_petty_bourgeoisie
				female = no
				dna = dna_gbr_edward_08
				ideology = ideology:ideology_authoritarian
				traits = {
					imperious
					arrogant
					charismatic
				}
				on_created = {
					set_variable = is_edward_8
					set_variable = is_hannover
					set_variable = weight_does_not_change
				}
			}
		}
	}
	if = {
		limit = {
			owner = {
				has_law = law_type:law_monarchy 
				ruler = { 
					has_variable = is_hannover 
					is_historical = no
				}
			}
		}
		random_scope_character = {
			limit = { 
				is_heir = yes 
				NOT = { has_variable = is_hannover }
			}
			set_variable = is_hannover
		}
	}
}

HJE_apply_historical_dynasty_heirs_PRU_effect = {
	if = {
		limit = {
			NOT = { has_global_variable = wilhelm_1_von_preusen_born }
			owner = { 
				has_law = law_type:law_monarchy 
				ruler = { has_variable = is_hohenzollern }
			}
			OR = {
				AND = { 
					exists = c:PRU
					owner = c:PRU
	            }
	            AND = { 
					NOT = { exists = c:PRU }
					exists = c:GER
					owner = c:GER
					c:GER = { owns_entire_state_region = STATE_BRANDENBURG }
	            }
				AND = { 
					NOT = { exists = c:PRU }
					exists = c:NGF
					owner = c:NGF
					c:NGF = { owns_entire_state_region = STATE_BRANDENBURG }
	            }
	        }
		}
		set_global_variable = wilhelm_1_von_preusen_born
		owner = {
			create_character = {
				first_name = Wilhelm
				last_name = von_Hohenzollern
				historical = yes
				heir = yes		
				birth_date = 1797.3.22
				dna = dna_emperor_wilhelm_1
				interest_group = ig_landowners
				female = no
				ideology = ideology:ideology_royalist
				traits = {
					romantic
					popular_commander
				}
				on_created = {
					set_variable = is_wilhelm_1
					set_variable = is_hohenzollern
				}
			}
		}
	}
	if = {
		limit = {
			year >= 1851
			has_global_variable = wilhelm_1_von_preusen_born
			NOT = { has_global_variable = friedrich_3_von_preusen_born }
			owner = { 
				has_law = law_type:law_monarchy 
				ruler = { has_variable = is_hohenzollern }
			}
			OR = {
				AND = { 
					exists = c:PRU
					owner = c:PRU
	            }
	            AND = { 
					NOT = { exists = c:PRU }
					exists = c:GER
					owner = c:GER
					c:GER = { owns_entire_state_region = STATE_BRANDENBURG }
	            }
				AND = { 
					NOT = { exists = c:PRU }
					exists = c:NGF
					owner = c:NGF
					c:NGF = { owns_entire_state_region = STATE_BRANDENBURG }
	            }
	        }
		}
		set_global_variable = friedrich_3_von_preusen_born
		owner = {
			create_character = {
				first_name = Friedrich
				last_name = von_Hohenzollern
				historical = yes
				heir = yes		
				birth_date = 1831.10.18
				dna = dna_emperor_friedrich_3
				interest_group = ig_armed_forces
				female = no
				ideology = ideology:ideology_radical
				traits = {
					cancer
					popular_commander
					persistent
				}
				on_created = {
					set_variable = is_friedrich_3
					set_variable = is_hohenzollern
					set_variable = weight_does_not_change
				}
			}
		}
	}
	if = {
		limit = {
			year >= 1859
			has_global_variable = wilhelm_1_von_preusen_born
			has_global_variable = friedrich_3_von_preusen_born
			NOT = { has_global_variable = wilhelm_2_von_preusen_born }
			owner = { 
				has_law = law_type:law_monarchy 
				ruler = { has_variable = is_hohenzollern }
			}
			OR = {
				AND = { 
					exists = c:PRU
					owner = c:PRU
	            }
	            AND = { 
					NOT = { exists = c:PRU }
					exists = c:GER
					owner = c:GER
					c:GER = { owns_entire_state_region = STATE_BRANDENBURG }
	            }
				AND = { 
					NOT = { exists = c:PRU }
					exists = c:NGF
					owner = c:NGF
					c:NGF = { owns_entire_state_region = STATE_BRANDENBURG }
	            }
	        }
		}
		set_global_variable = wilhelm_2_von_preusen_born
		owner = {
			create_character = {
				first_name = Wilhelm
				last_name = von_Hohenzollern
				historical = yes
				heir = yes		
				birth_date = 1859.1.27
				dna = dna_emperor_wilhelm_2
				interest_group = ig_landowners
				female = no
				ideology = ideology:ideology_jingoist_leader
				traits = {
					wrathful
					experienced_colonial_administrator
					imperious
					direct
				}
				on_created = {
					set_variable = is_wilhelm_2
					set_variable = is_hohenzollern
					set_variable = weight_does_not_change
				}
			}
		}
	}
	if = {
		limit = {
			year >= 1883
			has_global_variable = wilhelm_1_von_preusen_born
			has_global_variable = friedrich_3_von_preusen_born
			has_global_variable = wilhelm_2_von_preusen_born
			NOT = { has_global_variable = wilhelm_3_von_preusen_born }
			owner = { 
				has_law = law_type:law_monarchy 
				ruler = { has_variable = is_hohenzollern }
			}
			OR = {
				AND = { 
					exists = c:PRU
					owner = c:PRU
	            }
	            AND = { 
					NOT = { exists = c:PRU }
					exists = c:GER
					owner = c:GER
					c:GER = { owns_entire_state_region = STATE_BRANDENBURG }
	            }
				AND = { 
					NOT = { exists = c:PRU }
					exists = c:NGF
					owner = c:NGF
					c:NGF = { owns_entire_state_region = STATE_BRANDENBURG }
	            }
	        }
		}
		set_global_variable = wilhelm_3_von_preusen_born
		owner = {
			create_character = {
				first_name = Wilhelm
				last_name = von_Hohenzollern
				historical = yes
				heir = yes		
				birth_date = 1882.5.6
				dna = dna_kronprinz_wilhelm
				interest_group = ig_landowners
				female = no
				ideology = ideology:ideology_royalist
				traits = {
					charismatic
					expensive_tastes
					popular_commander
				}
				on_created = {
					set_variable = is_kronprinz
					set_variable = is_hohenzollern
				}
			}
		}
	}
	if = {
		limit = {
			owner = {
				has_law = law_type:law_monarchy 
				ruler = { 
					has_variable = is_hohenzollern 
					is_historical = no
				}
			}
		}
		random_scope_character = {
			limit = { 
				is_heir = yes 
				NOT = { has_variable = is_hohenzollern }
			}
			set_variable = is_hohenzollern
		}
	}
}

HJE_apply_historical_dynasty_heirs_TUR_effect = {
	if = {
		limit = {
			NOT = { has_global_variable = abdulaziz_1_born }
			exists = c:TUR
			owner = c:TUR
			owner = { 
				has_law = law_type:law_monarchy 
				ruler = { has_variable = is_osmanoglu }
			}
		}
		set_global_variable = abdulaziz_1_born
		owner = {
			create_character = {
				first_name = Abdulaziz
				last_name = Osmanoglu
				historical = yes
				female = no
				heir = yes		
				birth_date = 1830.2.8
				dna = dna_abdulaziz
				interest_group = ig_intelligentsia
				ideology = ideology:ideology_reformer
				traits = {
					expensive_tastes
					tactful
				}
				on_created = {
					set_variable = is_abdulaziz_1
					set_variable = is_osmanoglu
				}
			}
		}
	}
	if = {
		limit = {
			year >= 1841
			has_global_variable = abdulaziz_1_born
			NOT = { has_global_variable = murad_5_born }
			exists = c:TUR
			owner = c:TUR
			owner = { 
				has_law = law_type:law_monarchy 
				ruler = { has_variable = is_osmanoglu }
			}
		}
		set_global_variable = murad_5_born
		owner = {
			create_character = {
				first_name = Murad
				last_name = Osmanoglu
				historical = yes
				female = no
				heir = yes		
				birth_date = 1840.9.21
				dna = dna_murad_5
				interest_group = ig_intelligentsia
				ideology = ideology:ideology_moderate
				traits = {
					psychological_affliction
					reserved
				}
				on_created = {
					set_variable = is_murad_5
					set_variable = is_osmanoglu
				}
			}
		}
	}
	if = {
		limit = {
			year >= 1869
			has_global_variable = abdulaziz_1_born
			has_global_variable = murad_5_born
			NOT = { has_global_variable = abdulmecid_2_born }
			exists = c:TUR
			owner = c:TUR
			owner = { 
				has_law = law_type:law_monarchy 
				ruler = { 
					has_variable = is_osmanoglu 
					has_variable = no_longer_in_danger_of_being_overthrown
				}
			}
		}
		set_global_variable = abdulmecid_2_born
		owner = {
			create_character = {
				first_name = Abdulmecid
				last_name = Osmanoglu
				historical = yes
				female = no
				heir = yes		
				birth_date = 1868.5.30
				dna = dna_abdulmecid_2
				interest_group = ig_intelligentsia
				ideology = ideology:ideology_moderate
				traits = {
					cautious
					romantic
					pious
				}
				on_created = {
					set_variable = is_abdulmecid_2
					set_variable = is_osmanoglu
				}
			}
		}
	}
	if = {
		limit = {
			owner = {
				has_law = law_type:law_monarchy 
				ruler = { 
					has_variable = is_osmanoglu 
					is_historical = no
				}
			}
		}
		random_scope_character = {
			limit = { 
				is_heir = yes 
				NOT = { has_variable = is_osmanoglu }
			}
			set_variable = is_osmanoglu
		}
	}
}

HJE_semi_random_events_USA_effect = {
	if = {
		limit = {			#Random event for Americans to move to California
			year >= 1840
			year < 1850
			NOT = { has_global_variable = yankee_california_overflow }
			has_state_in_state_region = STATE_CALIFORNIA
			NOT = {
				any_country = {
					NOT = { PREV = THIS }
					has_state_in_state_region = STATE_CALIFORNIA
					NOR = {
						is_country_type = unrecognized
						is_country_type = decentralized
					}
				}
			}
		}
		random_list = {
			95 = {  }
			5 = { trigger_event = { id = HJE_usa.5 } }
		}
	}
	if = {
		limit = {			#Random event for Americans to move to Utah
			year >= 1845
			year < 1855
			NOT = { has_global_variable = utah_mormons }
			has_state_in_state_region = STATE_UTAH
			NOT = {
				any_country = {
					NOT = { PREV = THIS }
					has_state_in_state_region = STATE_UTAH
					NOR = {
						is_country_type = unrecognized
						is_country_type = decentralized
					}
				}
			}
		}
		random_list = {
			95 = {  }
			5 = { trigger_event = { id = HJE_usa.6 } }
		}
	}
	if = {
		limit = {			#Random event for Americans to build a American or Foreign Empire
			is_subject = no
			is_junior_in_customs_union = no
			NOT = { has_variable = HJE_american_empire_event }
			year > 1870
	    	OR = {
				year > 1885
				AND = {
					has_variable = manifested_destiny #already took Manifest Destiny decision
					has_variable = mexican_american_war_peace #peace with mexico
					has_global_variable = american_civil_war #the civil war happened
				}
	    	}
			OR = {
				AND = {
					exists = c:USA
					c:USA = THIS
				}
				AND = {
					exists = c:FSA
					c:FSA = THIS
				}
				AND = {
					exists = c:CSA
					c:CSA = THIS
				}
			}
			NOT = {
				any_country = {
					OR = {
						has_journal_entry = je_acw_war
						has_journal_entry = je_acw_war_csa_fsa
					}
				}
			}
		}
		random_list = {
			95 = {  }
			5 = { trigger_event = { id = HJE_usa.12 } }
		}
	}

	if = {
		limit = {			#Cuba AI liberty desire
			year > 1860
			exists = c:CUB
			c:CUB = THIS
			NOT = { has_strategy = ai_strategy_subject_break_free }
			any_overlord_or_above = {
				country_is_in_north_america = no
				country_is_in_central_america = no
				country_is_in_south_america = no
			}
		}
		set_strategy = ai_strategy_subject_break_free
	}
	if = {
		limit = {			#Random reoccuring event for Cubans to be prompted to rebel from non-american overlord
			is_subject = yes
			NOT = { has_variable = HJE_generic_rebellion_event_cooldown }
	    	year > 1860
			exists = c:CUB
			c:CUB = THIS
			any_overlord_or_above = {
				country_is_in_north_america = no
				country_is_in_central_america = no
				country_is_in_south_america = no
			}
		}
		random_list = {
			95 = {  }
			5 = { trigger_event = { id = HJE_main.8 } }
		}
	}
	if = {
		limit = {			#Philippines AI liberty desire
			year > 1860
			exists = c:PHI
			c:PHI = THIS
			NOT = { has_strategy = ai_strategy_subject_break_free }
			any_overlord_or_above = {
				country_is_in_north_america = no
				country_is_in_central_america = no
				country_is_in_south_america = no
			}
		}
		set_strategy = ai_strategy_subject_break_free
	}
	if = {
		limit = {			#Random reoccuring event for Filipinos to be prompted to rebel from non-asian overlord
			is_subject = yes
			NOT = { has_variable = HJE_generic_rebellion_event_cooldown }
	    	year > 1860
			exists = c:PHI
			c:PHI = THIS
			any_overlord_or_above = {
				country_is_in_india = no
				country_is_in_east_asia = no
				country_is_in_southeast_asia = no
			}
		}
		random_list = {
			95 = {  }
			5 = { trigger_event = { id = HJE_main.8 } }
		}
	}
}

HJE_semi_random_events_GER_effect = {

	if = {
		limit = {			#Krakau Uprising
			c:AUS = { NOT = { has_variable = kra_var } }
			exists = c:KRA
			exists = c:AUS
			OR = {
				any_diplomatic_play = {
					target_is = c:AUS
					initiator_is = c:KRA
				}
				any_diplomatic_play = {
					target_is = c:KRA
					initiator_is = c:AUS
				}
			}
		}
		random_diplomatic_play = {
			limit = {
				OR = {
					AND = {
						target_is = c:AUS
						initiator_is = c:KRA
					}
					AND = {
						target_is = c:KRA
						initiator_is = c:AUS
					}
				}
			}					
			add_war_goal = {
				holder = c:AUS
				type = annex_country
				target_country = c:KRA
				target_state = s:STATE_WEST_GALICIA.region_state:KRA			
				primary_demand = yes
			}
		}
		c:KRA = { set_variable = krakow_uprising_happened }
		c:AUS = { 
			set_variable = kra_var 
			add_journal_entry = { type = je_the_krakow_uprising }
		}
	}
	if = {
		limit = {			#Bismark event for early formed German Federation
			OR = {
				AND = { exists = c:NGF c:NGF = THIS }
				AND = { exists = c:GER c:GER = THIS }
			}
		}
		random_list = {
			9 = {  }
			1 = { trigger_event = { id = german_unification.3 } }
		}
	}
	if = {
		limit = {			#Randomized event for Prussia to goad France into invading them
			year >= 1870
			year < 1880
			NOT = { has_global_variable = ems_dispatch_scheme }
			aggressive_diplomatic_plays_permitted = yes
			is_diplomatic_play_committed_participant = no
			is_diplomatic_play_initiator = no
			is_diplomatic_play_target = no
			NOT = { country_or_subject_owns_entire_state_region = STATE_ALSACE_LORRAINE }
			any_country = {
				is_adjacent_to_country = ROOT
				aggressive_diplomatic_plays_permitted = yes
				OR = { country_rank >= rank_value:major_power this ?= c:SWI }
				country_or_subject_owns_entire_state_region = STATE_ALSACE_LORRAINE
			}
			OR = {
				AND = {
					exists = c:NGF
					c:NGF = THIS
				}
				AND = {
					exists = c:SGF
					c:SGF = THIS
				}
				AND = {
					exists = c:PRU
					c:PRU = THIS
				}
			}
		}
		random_list = {
			90 = {  }
			10 = { trigger_event = { id = HJE_prussia.5 } }
		}
	}
}

HJE_semi_random_events_ITA_effect = {
	if = {
		limit = {			#Italians join in on the Brother's War
			is_player = no
			OR = {
				country_has_primary_culture = cu:north_italian
				country_has_primary_culture = cu:south_italian
			}
			calc_true_if = {
				amount >= 6
				any_scope_state = { state_region = s:STATE_LOMBARDY }
				any_scope_state = { state_region = s:STATE_PIEDMONT }
				any_scope_state = { state_region = s:STATE_UMBRIA }
				any_scope_state = { state_region = s:STATE_CAMPANIA }
				any_scope_state = { state_region = s:STATE_CALABRIA }
				any_scope_state = { state_region = s:STATE_APULIA }
				any_scope_state = { state_region = s:STATE_ABRUZZO }
				any_scope_state = { state_region = s:STATE_SAVOY }
				any_scope_state = { state_region = s:STATE_EMILIA }
				any_scope_state = { state_region = s:STATE_TUSCANY }
				any_scope_state = { state_region = s:STATE_ROMAGNA }
				any_scope_state = { state_region = s:STATE_LAZIO }
				any_scope_state = { state_region = s:STATE_VENETIA }
				any_scope_state = { state_region = s:STATE_SICILY }
			}
			is_diplomatic_play_committed_participant = no
			exists = c:AUS
			NOT = { c:AUS = { is_diplomatic_play_enemy_of = ROOT } }
			OR = {
				c:AUS = { has_state_in_state_region = STATE_VENETIA }
				c:AUS = { has_state_in_state_region = STATE_LOMBARDY }
			}
			any_country = {
				NOT = { THIS = ROOT }
				NOT = { THIS = c:AUS }
				is_adjacent_to_country = c:AUS
				country_rank >= rank_value:great_power
				is_diplomatic_play_enemy_of = c:AUS
				is_diplomatic_play_initiator = yes
			}
			NOT = { has_variable = ai_venetia_var }
		}
		s:STATE_VENETIA = { add_claim = root }
		s:STATE_LOMBARDY = { add_claim = root }
		random_country = {
			limit = {
				is_unification_candidate = GER
				is_diplomatic_play_enemy_of = c:AUS
			}
			random_diplomatic_play = {
				limit = {
					initiator_is = PREV
					target_is = c:AUS
				}
				add_initiator_backers = { ROOT }
				add_war_goal = {
					holder = ROOT
					type = return_state
					target_state = s:STATE_VENETIA.region_state:AUS			
					primary_demand = yes
				}
				add_war_goal = {
					holder = ROOT
					type = return_state
					target_state = s:STATE_LOMBARDY.region_state:AUS			
					primary_demand = yes
				}
			}
		}
		add_modifier = { 
			name = wartime_zeal
			months = 12
		}
		set_variable = ai_venetia_var				
	}
	
	if = {
		limit = {			#Give Italy Former the opportunity to move capital to Rome
			exists = c:ITA
			c:ITA = THIS
			NOT = { has_variable = ITA_newly_formed_capital_decision }
		}
		c:ITA = { 
			set_variable = ITA_newly_formed_capital_decision
			trigger_event = { id = HJE_main.1 }
		}
	}
}
